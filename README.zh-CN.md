# ç½‘æ˜“äº‘éŸ³ä¹ä¸‹è½½å™¨

> [English](README.md) | [ç®€ä½“ä¸­æ–‡](README.zh-CN.md)

ä¸€ä¸ªåŸºäºPythonå’ŒVue.jsçš„ç½‘æ˜“äº‘éŸ³ä¹ä¸‹è½½å·¥å…·ï¼Œæ”¯æŒæœç´¢ã€æ‰¹é‡ä¸‹è½½éŸ³ä¹ï¼Œæä¾›å‹å¥½çš„Webç•Œé¢ã€‚

## ğŸ¯ é¡µé¢åŠŸèƒ½

### 1. éŸ³ä¹æœç´¢ (`/search`)
- **åŠŸèƒ½æè¿°**: æœç´¢å•æ›²å¹¶ä¸‹è½½
- **ä¸»è¦ç‰¹æ€§**:
  - æ”¯æŒå…³é”®è¯æœç´¢éŸ³ä¹
  - å¤šç§éŸ³è´¨é€‰æ‹©ï¼ˆæ ‡å‡†ã€æé«˜ã€æ— æŸã€Hi-Resç­‰ï¼‰
  - å®æ—¶æœç´¢ç»“æœæ˜¾ç¤º
  - å•æ›²ä¸‹è½½å’Œæ‰¹é‡ä¸‹è½½
  - ä¸‹è½½è¿›åº¦å®æ—¶æ˜¾ç¤º

### 2. æ­Œå•æœç´¢ (`/playlist-download`)
- **åŠŸèƒ½æè¿°**: æœç´¢å¹¶æ‰¹é‡ä¸‹è½½æ­Œå•å†…å®¹
- **ä¸»è¦ç‰¹æ€§**:
  - æ”¯æŒæ­Œå•IDæˆ–å…³é”®è¯æœç´¢
  - æ­Œå•è¯¦æƒ…é¢„è§ˆï¼ˆåŒ…å«æ­Œæ›²åˆ—è¡¨ï¼‰
  - æ‰¹é‡ä¸‹è½½æ­Œå•å†…æ‰€æœ‰æ­Œæ›²
  - å¯é…ç½®ä¸‹è½½éŸ³è´¨å’Œå¹¶å‘æ•°
  - ä¸‹è½½è¿›åº¦è·Ÿè¸ª

### 3. æ­Œæ‰‹æœç´¢ (`/artist-download`)
- **åŠŸèƒ½æè¿°**: æœç´¢å¹¶ä¸‹è½½æ­Œæ‰‹çš„æ‰€æœ‰ä½œå“
- **ä¸»è¦ç‰¹æ€§**:
  - æ”¯æŒæ­Œæ‰‹åç§°æœç´¢
  - è·å–æ­Œæ‰‹æ‰€æœ‰æ­Œæ›²åˆ—è¡¨
  - å¤šç§åŒ¹é…æ¨¡å¼ï¼ˆç²¾ç¡®åŒ¹é…ã€éƒ¨åˆ†åŒ¹é…ç­‰ï¼‰
  - å¯è®¾ç½®ä¸‹è½½æ•°é‡é™åˆ¶
  - æ‰¹é‡ä¸‹è½½æ­Œæ‰‹ä½œå“

### 4. çƒ­é—¨æ­Œå• (`/hot-playlists`)
- **åŠŸèƒ½æè¿°**: æµè§ˆå’Œä¸‹è½½ç½‘æ˜“äº‘çƒ­é—¨æ­Œå•
- **ä¸»è¦ç‰¹æ€§**:
  - æ¨èæ­Œå•å±•ç¤º
  - é«˜å“è´¨æ­Œå•ç­›é€‰
  - åˆ†ç±»æ­Œå•æµè§ˆ
  - æŒ‰æ’­æ”¾é‡æ’åº
  - ä¸€é”®ä¸‹è½½çƒ­é—¨æ­Œå•

### 5. ä»»åŠ¡ç®¡ç† (`/task-manager`)
- **åŠŸèƒ½æè¿°**: ç®¡ç†æ‰€æœ‰ä¸‹è½½ä»»åŠ¡
- **ä¸»è¦ç‰¹æ€§**:
  - å®æ—¶ä»»åŠ¡çŠ¶æ€ç›‘æ§
  - ä¸‹è½½è¿›åº¦å¯è§†åŒ–
  - ä»»åŠ¡å–æ¶ˆåŠŸèƒ½
  - å†å²ä»»åŠ¡è®°å½•
  - é”™è¯¯ä¿¡æ¯æŸ¥çœ‹

### å…¨å±€åŠŸèƒ½
- **äºŒç»´ç ç™»å½•**: æ”¯æŒç½‘æ˜“äº‘è´¦å·æ‰«ç ç™»å½•æ›´æ–°cookie
- **å“åº”å¼è®¾è®¡**: é€‚é…æ¡Œé¢å’Œç§»åŠ¨è®¾å¤‡
- **å®æ—¶é€šçŸ¥**: ä¸‹è½½å®Œæˆå’Œé”™è¯¯æç¤º

## ğŸš€ éƒ¨ç½²ä½¿ç”¨

### Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

#### ç¯å¢ƒè¦æ±‚
- Docker
- Docker Compose

#### éƒ¨ç½²æ­¥éª¤

1. **å‡†å¤‡ç›®å½•å’Œæ–‡ä»¶**
```bash
# åˆ›å»ºå¿…è¦ç›®å½•
mkdir -p downloads
mkdir -p logs

# å¤åˆ¶é…ç½®æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
cp config.json.example config.json
```

2. **å¯åŠ¨æœåŠ¡**
```bash
# ä½¿ç”¨docker-composeå¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose logs -f
```

3. **è®¿é—®åº”ç”¨**
- å‰ç«¯ç•Œé¢ï¼šhttp://localhost:3000
- åç«¯APIï¼šhttp://localhost:5000

#### Dockeré•œåƒä¿¡æ¯
- **é•œåƒåç§°**: `adolphicky/auto-music`
- **åŸºç¡€é•œåƒ**: Python 3.13-slim + Node.js 18
- **è¿›ç¨‹ç®¡ç†**: Supervisor
- **å¥åº·æ£€æŸ¥**: è‡ªåŠ¨ç›‘æ§æœåŠ¡çŠ¶æ€

### æ‰‹åŠ¨éƒ¨ç½²

#### åç«¯éƒ¨ç½²

1. **å®‰è£…Pythonä¾èµ–**
```bash
pip install -r requirements.txt
```

2. **é…ç½®ç¯å¢ƒ**
```bash
cp config.json.example config.json
# ç¼–è¾‘config.jsonæ–‡ä»¶é…ç½®å‚æ•°
```

3. **å¯åŠ¨åç«¯æœåŠ¡**
```bash
python main.py
```

#### å‰ç«¯éƒ¨ç½²

1. **å®‰è£…ä¾èµ–**
```bash
npm install
```

2. **å¼€å‘æ¨¡å¼è¿è¡Œ**
```bash
npm run dev
```

3. **ç”Ÿäº§æ„å»º**
```bash
npm run build
```

## âš™ï¸ é…ç½®å¼€å‘

### é…ç½®æ–‡ä»¶è¯´æ˜

é…ç½®æ–‡ä»¶ï¼š`config.json`

```json
{
    // æœåŠ¡å™¨é…ç½®
    "host": "0.0.0.0",
    "port": 5000,
    "debug": false,
    "max_file_size": 524288000,
    "request_timeout": 30,
    "log_level": "INFO",
    "cors_origins": "*",
    
    // é€šç”¨ä¸‹è½½é…ç½®
    "download": {
        "base_dir": "downloads",
        "max_concurrent": 3,
        "default_quality": "lossless",
        "include_lyric": true
    },
    
    // å•æ›²ä¸‹è½½é…ç½®
    "music_download": {
        "sub_dir": "",
        "max_concurrent": 3
    },
    
    // æ­Œå•ä¸‹è½½é…ç½®
    "playlist_download": {
        "sub_dir": "",
        "max_concurrent": 3,
        "default_quality": "lossless",
        "include_lyric": true
    },
    
    // æ­Œæ‰‹ä¸‹è½½é…ç½®
    "artist_download": {
        "sub_dir": "",
        "max_concurrent": 3,
        "default_quality": "lossless",
        "default_limit": 50,
        "default_match_mode": "exact_single",
        "include_lyric": true,
        "search_page_size": 100
    },
    
    // æ•°æ®åº“é…ç½®
    "database": {
        "db_path": "downloads.db",
        "recent_downloads_limit": 50
    },
    
    // Cookieé…ç½®
    "cookie": {
        "cookie_file": "cookie.txt",
        "qr_login_max_attempts": 60
    }
}
```

### éŸ³è´¨é€‰é¡¹
- `standard` - æ ‡å‡†éŸ³è´¨
- `exhigh` - æé«˜éŸ³è´¨  
- `lossless` - æ— æŸéŸ³è´¨
- `hires` - Hi-ReséŸ³è´¨
- `sky` - æ²‰æµ¸ç¯ç»•å£°
- `dolby` - æœæ¯”å…¨æ™¯å£°

### å¼€å‘ç¯å¢ƒæ­å»º

#### åç«¯å¼€å‘
```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¼€å‘æ¨¡å¼è¿è¡Œ
python main.py

# è°ƒè¯•æ¨¡å¼ï¼ˆå¯ç”¨è¯¦ç»†æ—¥å¿—ï¼‰
python main.py --debug
```

#### å‰ç«¯å¼€å‘
```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# é¢„è§ˆæ„å»ºç»“æœ
npm run preview
```

### é¡¹ç›®ç»“æ„
```
music-auto/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # Vueç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ SearchComponent.vue          # éŸ³ä¹æœç´¢
â”‚   â”‚   â”œâ”€â”€ PlaylistSearchComponent.vue  # æ­Œå•æœç´¢
â”‚   â”‚   â”œâ”€â”€ ArtistDownloadComponent.vue  # æ­Œæ‰‹ä¸‹è½½
â”‚   â”‚   â”œâ”€â”€ HotPlaylistsComponent.vue    # çƒ­é—¨æ­Œå•
â”‚   â”‚   â”œâ”€â”€ TaskManagerComponent.vue     # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â””â”€â”€ QRLoginComponent.vue         # äºŒç»´ç ç™»å½•
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ apiService.js   # APIæœåŠ¡
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.js        # è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ App.vue            # ä¸»åº”ç”¨
â”‚   â””â”€â”€ main.js            # å…¥å£æ–‡ä»¶
â”œâ”€â”€ *.py                   # åç«¯Pythonæ–‡ä»¶
â”œâ”€â”€ config.json.example    # é…ç½®ç¤ºä¾‹
â”œâ”€â”€ docker-compose.yml     # Dockerç¼–æ’
â”œâ”€â”€ Dockerfile            # Dockeré•œåƒæ„å»º
â”œâ”€â”€ requirements.txt      # Pythonä¾èµ–
â””â”€â”€ package.json         # å‰ç«¯ä¾èµ–
```

### APIæ¥å£æ–‡æ¡£

#### è®¤è¯ç›¸å…³
- `GET /api/auth/qr-code` - è·å–ç™»å½•äºŒç»´ç 
- `GET /api/auth/check-login` - æ£€æŸ¥ç™»å½•çŠ¶æ€
- `POST /api/auth/save-cookie` - ä¿å­˜Cookie

#### éŸ³ä¹ç›¸å…³
- `GET /api/music/search` - æœç´¢éŸ³ä¹
- `POST /api/music/download` - ä¸‹è½½éŸ³ä¹
- `GET /api/playlist/detail` - è·å–æ­Œå•è¯¦æƒ…
- `POST /api/playlist/download` - ä¸‹è½½æ­Œå•
- `GET /api/artist/songs` - è·å–æ­Œæ‰‹æ­Œæ›²
- `POST /api/artist/download` - ä¸‹è½½æ­Œæ‰‹ä½œå“
- `GET /api/hot/playlists` - è·å–çƒ­é—¨æ­Œå•

#### ä»»åŠ¡ç®¡ç†
- `GET /api/tasks` - è·å–æ‰€æœ‰ä»»åŠ¡
- `GET /api/tasks/<task_id>` - è·å–ä»»åŠ¡è¯¦æƒ…
- `POST /api/tasks/<task_id>/cancel` - å–æ¶ˆä»»åŠ¡
- `POST /api/tasks/clear-cancelled` - æ¸…ç†å·²å–æ¶ˆä»»åŠ¡

#### ç³»ç»Ÿç›¸å…³
- `GET /health` - å¥åº·æ£€æŸ¥
- `GET /api/info` - APIä¿¡æ¯
## ğŸ³ Dockeré•œåƒä¿¡æ¯

**é•œåƒåç§°**: `adolphicky/auto-music`

**é•œåƒç‰¹æ€§**:
- åŸºäºPython 3.13-slim
- åŒ…å«Node.js 18ç¯å¢ƒ
- ä½¿ç”¨Supervisorç®¡ç†è¿›ç¨‹
- å¥åº·æ£€æŸ¥æ”¯æŒ
- è‡ªåŠ¨æ„å»ºå‰ç«¯

**ç«¯å£æ˜ å°„**:
- å‰ç«¯ç•Œé¢ï¼š3000 â†’ 3000ï¼ˆä¸»æœºï¼‰
- åç«¯APIï¼š5000ï¼ˆå®¹å™¨å†…éƒ¨ï¼‰

**æ•°æ®å·æŒ‚è½½**:
- `./downloads` â†’ `/app/downloads`ï¼ˆä¸‹è½½ç›®å½•ï¼‰
- `./config.json` â†’ `/app/config.json`ï¼ˆé…ç½®æ–‡ä»¶ï¼‰
- `./cookie.txt` â†’ `/app/cookie.txt`ï¼ˆCookieæ–‡ä»¶ï¼‰
- `./logs` â†’ `/var/log/supervisor`ï¼ˆæ—¥å¿—ç›®å½•ï¼‰
## ğŸ”’ å®‰å…¨è¯´æ˜

- åº”ç”¨éœ€è¦ç½‘æ˜“äº‘è´¦å·ç™»å½•æ‰èƒ½ä¸‹è½½VIPéŸ³è´¨
- Cookieä¿¡æ¯å­˜å‚¨åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ï¼Œè¯·å¦¥å–„ä¿ç®¡
- å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­é…ç½®é€‚å½“çš„è®¿é—®æ§åˆ¶
- é»˜è®¤ç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£ï¼Œå¯æ ¹æ®éœ€è¦ä¿®æ”¹ç»‘å®šåœ°å€

## ğŸ“ ä½¿ç”¨è¯´æ˜

1. **é¦–æ¬¡ä½¿ç”¨**: è®¿é—®å‰ç«¯ç•Œé¢ï¼Œç‚¹å‡»äºŒç»´ç ç™»å½•è¿›è¡Œè´¦å·è®¤è¯
2. **æœç´¢éŸ³ä¹**: åœ¨æœç´¢é¡µé¢è¾“å…¥å…³é”®è¯ï¼Œé€‰æ‹©éŸ³è´¨åä¸‹è½½
3. **æ‰¹é‡ä¸‹è½½**: ä½¿ç”¨æ­Œå•æˆ–æ­Œæ‰‹åŠŸèƒ½è¿›è¡Œæ‰¹é‡ä¸‹è½½
4. **ä¸‹è½½ç®¡ç†**: ä¸‹è½½çš„æ–‡ä»¶ä¿å­˜åœ¨`downloads`ç›®å½•ä¸­
5. **ä»»åŠ¡ç›‘æ§**: åœ¨ä»»åŠ¡ç®¡ç†é¡µé¢æŸ¥çœ‹ä¸‹è½½è¿›åº¦å’ŒçŠ¶æ€

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®åŸºäºMITè®¸å¯è¯å¼€æºã€‚

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPull Requestæ¥æ”¹è¿›æœ¬é¡¹ç›®ã€‚

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ç”¨äºå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·å‹¿ç”¨äºå•†ä¸šç”¨é€”ã€‚ä¸‹è½½çš„éŸ³ä¹æ–‡ä»¶è¯·éµå®ˆç›¸å…³ç‰ˆæƒæ³•å¾‹æ³•è§„ï¼Œæ”¯æŒæ­£ç‰ˆéŸ³ä¹ã€‚
